{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n// import searchImages from \"./js/pixabay-api\"\n// import showGallery from \"./js/render-functions\"\n\n\n\nconst textInput = document.querySelector(\"#form\");\nconst button = document.querySelector(\".button\");\nconst gallery = document.querySelector(\".gallery\");\nconst block = document.querySelector(\".block\");\nconst loadMoreBtn = document.querySelector(\".btn\");\n\ntextInput.addEventListener(\"submit\", handleSubmit);\n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionSelector: \"img\",\n  captionDelay: 250,\n};\n\nconst API_KEY = \"42275750-ff2dba3de74b1266fbd0f53be\";\naxios.defaults.baseURL = \"https://pixabay.com\";\nconst END_POINT = \"/api/\";\n\n\nlet page = 1;\nlet perPage = 15;\n\n// Function to show the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  loader.textContent = \"Loading images, please wait...\";\n  block.append(loader);\n};\n\n// Function to hide the loader\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\n\nasync function searchImages(userSearch) {\n  try {\n      const params = new URLSearchParams({\n        key: API_KEY,\n        q: userSearch,\n        image_type: \"photo\",\n        per_page: perPage,\n        page: page,\n      });\n    const response = await axios.get(END_POINT, { params });\n    const data = response.data;\n    console.log(data);\n\nif (data.totalHits === 0) {\n        hideLoader();\n        iziToast.error({\n          position: 'topRight',\n          color: 'red',\n          message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n        });\n      } else {\n        await showGallery(data);\n        hideLoader();\n      const lightbox = new SimpleLightbox('.gallery a', options);\n      lightbox.refresh();\n  }\n\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n}\n\n\n\n// export { gallery };\n// export { hideLoader };\n\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  const userSearch = textInput.elements.query.value.trim();\n\n  if (userSearch === \"\") {\n    iziToast.error({\n      position: 'topRight',\n      overlay: false,\n      color: 'red',\n      message: \"Sorry, there are no images matching<br>your search query. Please try again!\",\n    });\n  } else {\n    showLoader();\n    await searchImages(userSearch); \n  }\n  textInput.reset();\n  removeGallery();\n}\n\n\nfunction removeGallery() {\n  gallery.innerHTML = '';\n};\n\n\n\nfunction showGallery(data) {\n  const markup = data.hits\n    .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n      \n      return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div>\n            <p><b>Likes </b>${likes}</p>\n            <p><b>Views </b>${views}</p>\n            <p><b>Comments </b>${comments}</p>\n            <p><b>Downloads </b>${downloads}</p>\n          </div>\n        </li>\n      `;\n    })\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n};\n\n\n"],"names":["textInput","gallery","block","handleSubmit","options","API_KEY","axios","END_POINT","page","perPage","showLoader","loader","hideLoader","searchImages","userSearch","params","data","iziToast","showGallery","SimpleLightbox","error","e","removeGallery","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"owBAWA,MAAMA,EAAY,SAAS,cAAc,OAAO,EACjC,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAQ,SAAS,cAAc,QAAQ,EACzB,SAAS,cAAc,MAAM,EAEjDF,EAAU,iBAAiB,SAAUG,CAAY,EAEjD,MAAMC,EAAU,CACd,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,gBAAiB,MACjB,aAAc,GAChB,EAEMC,EAAU,qCAChBC,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAY,QAGlB,IAAIC,EAAO,EACPC,EAAU,GAGd,MAAMC,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,YAAc,iCACrBT,EAAM,OAAOS,CAAM,CACrB,EAGMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAGA,eAAeE,EAAaC,EAAY,CACtC,GAAI,CACA,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKV,EACL,EAAGS,EACH,WAAY,QACZ,SAAUL,EACV,KAAMD,CACd,CAAO,EAEGQ,GADW,MAAMV,EAAM,IAAIC,EAAW,CAAE,OAAAQ,CAAM,CAAE,GAChC,KACtB,QAAQ,IAAIC,CAAI,EAEhBA,EAAK,YAAc,GACfJ,IACAK,EAAS,MAAM,CACb,SAAU,WACV,MAAO,MACP,QAAS,6EACnB,CAAS,IAED,MAAMC,EAAYF,CAAI,EACtBJ,IACe,IAAIO,EAAe,aAAcf,CAAO,EAChD,QAAO,EAGnB,OAAQgB,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CAQA,eAAejB,EAAakB,EAAG,CAC7BA,EAAE,eAAc,EAChB,MAAMP,EAAad,EAAU,SAAS,MAAM,MAAM,OAE9Cc,IAAe,GACjBG,EAAS,MAAM,CACb,SAAU,WACV,QAAS,GACT,MAAO,MACP,QAAS,6EACf,CAAK,GAEDP,IACA,MAAMG,EAAaC,CAAU,GAE/Bd,EAAU,MAAK,EACfsB,GACF,CAGA,SAASA,GAAgB,CACvBrB,EAAQ,UAAY,EACtB,CAIA,SAASiB,EAAYF,EAAM,CACzB,MAAMO,EAASP,EAAK,KACjB,IAAI,CAAC,CAAE,cAAAQ,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAE1D;AAAA;AAAA,0CAE6BN,CAAa;AAAA,4CACXC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,8BAGxCC,CAAK;AAAA,8BACLC,CAAK;AAAA,iCACFC,CAAQ;AAAA,kCACPC,CAAS;AAAA;AAAA;AAAA,OAItC,EACA,KAAK,EAAE,EACV7B,EAAQ,mBAAmB,YAAasB,CAAM,CAChD"}