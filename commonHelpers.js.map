{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nconst API_KEY = \"42275750-ff2dba3de74b1266fbd0f53be\";\n\n\nexport async function searchImages(userSearch, page) {\n\n  const params = new URLSearchParams({\n        key: API_KEY,\n        q: userSearch,\n        image_type: \"photo\",\n        per_page: 15,\n        page: page,\n      });\n    axios.defaults.baseURL = \"https://pixabay.com\";\n    const END_POINT = \"/api/\";\n\n    return await axios.get(END_POINT, { params })\n      .then(response => {\n      if (response.data.totalHits === 0) {\n        hideLoader();\n        iziToast.error({\n          position: 'topRight',\n          color: 'red',\n          message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n        });\n      } else {\n        \n        return response.data;\n      }\n    });\n};","const gallery = document.querySelector(\".gallery\");\n\nfunction showGallery(hit) {\n  const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = hit;\n  \n  return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div>\n            <p><b>Likes </b>${likes}</p>\n            <p><b>Views </b>${views}</p>\n            <p><b>Comments </b>${comments}</p>\n            <p><b>Downloads </b>${downloads}</p>\n          </div>\n        </li>\n      `;\n}\n\nexport function renderGallery(hits) {\n  const markup = hits.map(showGallery).join('');\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nimport { searchImages } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-functions\"\n\n\nconst textInput = document.querySelector(\"#form\");\nconst button = document.querySelector(\".button\");\nconst gallery = document.querySelector(\".gallery\");\nconst block = document.querySelector(\".block\");\nconst loadMoreBtn = document.querySelector(\".btn\");\n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionSelector: \"img\",\n  captionDelay: 250,\n};\n\nlet page;\nlet userSearch;\nlet maxPage; \n\n// Function to show the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  loader.textContent = \"Loading images, please wait...\";\n  block.append(loader);\n};\n\n// Function to hide the loader\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\n\ntextInput.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMoreClick);\n\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  showLoader();\n\n  userSearch = textInput.elements.query.value.trim();\n  page = 1;\n  const data = await searchImages(userSearch, page);\n  maxPage= Math.ceil(data.totalHits / 15);\n  gallery.innerHTML = '';\n\n  if (userSearch === \"\") {\n    iziToast.error({\n          position: 'topRight',\n          color: 'red',\n          message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n        });\n  } else {\n    renderGallery(data.hits); \n\n    let lightbox = new SimpleLightbox('.gallery a', options);\n    lightbox.refresh();\n\n    checkBtnStatus();\n  }\n  textInput.reset();\n  hideLoader();\n};\n\n\nasync function loadMoreClick() {\n  showLoader();\n  page += 1;\n  const data = await searchImages(userSearch, page);\n  renderGallery(data.hits);\n  hideLoader();\n\n  const height = gallery.firstElementChild.getBoundingClientRect().height;\n  scrollBy({ top: height * 2, left: 0, behavior: 'smooth' });\n \n  lightbox = new SimpleLightbox('.gallery a', options);\n  lightbox.refresh();\n  checkBtnStatus();\n};\n\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n    loadMoreBtn.style.display = \"none\";\n    iziToast.info({\n      position: 'topRight',\n      overlay: false,\n      color: 'blue',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {loadMoreBtn.style.display = \"block\";}\n};\n\n"],"names":["API_KEY","searchImages","userSearch","page","params","axios","END_POINT","response","gallery","showGallery","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","hits","markup","textInput","block","loadMoreBtn","options","maxPage","showLoader","loader","hideLoader","handleSubmit","loadMoreClick","e","data","iziToast","SimpleLightbox","checkBtnStatus","height"],"mappings":"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"}