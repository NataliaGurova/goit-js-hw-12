{"version":3,"file":"commonHelpers.js","sources":["../src/js/hideloader.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n// Function to hide the loader\nexport const hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport { hideLoader } from \"./hideloader\"\n\nconst API_KEY = \"42275750-ff2dba3de74b1266fbd0f53be\";\n\n\nexport async function searchImages(userSearch, page) {\n\n  const params = new URLSearchParams({\n        key: API_KEY,\n        q: userSearch,\n        image_type: \"photo\",\n        per_page: 15,\n        page: page,\n      });\n    axios.defaults.baseURL = \"https://pixabay.com\";\n    const END_POINT = \"/api/\";\n\n    return await axios.get(END_POINT, { params })\n      .then(response => {\n      if (response.data.totalHits === 0) {\n        hideLoader();\n        iziToast.error({\n          position: 'topRight',\n          color: 'red',\n          message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n        });\n      } else {\n        \n        return response.data;\n      }\n    });\n};","const gallery = document.querySelector(\".gallery\");\n\nfunction showGallery(hit) {\n  const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = hit;\n  \n  return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <div>\n            <p><b>Likes </b>${likes}</p>\n            <p><b>Views </b>${views}</p>\n            <p><b>Comments </b>${comments}</p>\n            <p><b>Downloads </b>${downloads}</p>\n          </div>\n        </li>\n      `;\n}\n\nexport function renderGallery(hits) {\n  const markup = hits.map(showGallery).join('');\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { searchImages } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-functions\"\nimport { hideLoader } from \"./js/hideloader\";\n\n\nconst textInput = document.querySelector(\"#form\");\nconst button = document.querySelector(\".button\");\nconst gallery = document.querySelector(\".gallery\");\nconst block = document.querySelector(\".block\");\nconst loadMoreBtn = document.querySelector(\".btn\");\n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionSelector: \"img\",\n  captionDelay: 250,\n};\n\nlet page;\nlet userSearch;\nlet maxPage; \nlet lightbox = new SimpleLightbox('.gallery a', options);\n\n// Function to show the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  loader.textContent = \"Loading images, please wait...\";\n  block.append(loader);\n};\n\n\n\ntextInput.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMoreClick);\n\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  userSearch = textInput.elements.query.value.trim();\n  page = 1;\n\n  try {\n    const data = await searchImages(userSearch, page);\n    maxPage = Math.ceil(data.totalHits / 15);\n\n    if (userSearch === \"\") {\n      hideLoader();\n      iziToast.error({\n        position: 'topRight',\n        color: 'red',\n        message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n      });\n    } else {\n      showLoader();\n      renderGallery(data.hits);\n\n      lightbox.refresh();\n\n      checkBtnStatus();\n    }\n  } catch(error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  textInput.reset();\n  hideLoader();\n};\n\n\nasync function loadMoreClick() {\n  showLoader();\n  page += 1;\n  const data = await searchImages(userSearch, page);\n  renderGallery(data.hits);\n  hideLoader();\n  checkBtnStatus();\n\n  const height = gallery.firstElementChild.getBoundingClientRect().height;\n  scrollBy({ top: height * 2, left: 0, behavior: 'smooth' });\n\n  lightbox.refresh();\n};\n\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n    loadMoreBtn.style.display = \"none\";\n    iziToast.info({\n      position: 'topRight',\n      overlay: false,\n      color: 'blue',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {loadMoreBtn.style.display = \"block\";}\n};\n\n"],"names":["hideLoader","loader","API_KEY","searchImages","userSearch","page","params","axios","END_POINT","response","iziToast","gallery","showGallery","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","hits","markup","textInput","block","loadMoreBtn","options","maxPage","lightbox","SimpleLightbox","showLoader","handleSubmit","loadMoreClick","e","data","checkBtnStatus","error","height"],"mappings":"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"}